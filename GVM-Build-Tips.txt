Openvas / GVM build hints

# Check GVM status after install
    tail -f /opt/gvm/var/log/gvm/gsad.log
    sudo tail -f /opt/gvm/var/log/gvm/gvmd.log
    tail -f /opt/gvm/var/log/gvm/openvas.log
    tail -f /opt/gvm/var/log/gvm/ospd-openvas.log

# Udate GVM in this order
    
    sudo -u gvm -g gvm /opt/gvm/bin/greenbone-nvt-sync
    sudo -u gvm -g gvm /opt/gvm/sbin/openvas --update-vt-info
    sudo -u gvm -g gvm /opt/gvm/sbin/greenbone-feed-sync --type SCAP
    sudo -u gvm -g gvm /opt/gvm/sbin/greenbone-feed-sync --type CERT
    sudo -u gvm -g gvm /opt/gvm/sbin/greenbone-feed-sync --type GVMD_DATA

or

# Manually update GVM in user shell 
    #a) sudo -i
    #b) su gvm
    #c) /opt/gvm/sbin/greenbone-feed-sync --type SCAP
    #d) /opt/gvm/bin/greenbone-nvt-sync
    #e) /opt/gvm/sbin/greenbone-feed-sync --type CERT
    #f) /opt/gvm/sbin/greenbone-feed-sync --type GVMD_DATA
    #g) /usr/bin/sudo /opt/gvm/sbin/openvas --update-vt-info

# Update gvm user crontab
  sudo -i
  su gvm
  crontab -e

  5 0 * * * /opt/gvm/sbin/greenbone-feed-sync --type SCAP
  10 5 * * * /opt/gvm/bin/greenbone-nvt-sync
  20 10 * * * /opt/gvm/sbin/greenbone-feed-sync --type CERT
  40 15 * * * /opt/gvm/sbin/greenbone-feed-sync --type GVMD_DATA
  05 20 * * * /usr/bin/sudo /opt/gvm/sbin/openvas --update-vt-info


# Rebuild GVM NVT database - if things go really south 
  export $(sudo cat /etc/default/gvmd-pg)
  sudo -E -u gvm -g gvm gvmd --rebuild

#Rename pax8 admin user
  1. You need to first create a new user with admin privileges:
  gvmd --create-user=new_user --password=<password> --role=Admin

  2. Then inherit tasks from user admin:
     gvmd â€“delete-user=admin --inheritor=new_user

# Install mailserver
  sudo apt update
  sudo apt install postfix mailutils (select internet only type)
  sudo nano /etc/postfix/main.cf (change line to: inet_interfaces = loopback-only)
  sudo /etc/inet.d/postfix restart
  echo "email message body" | mail -s "test subject" youremail@yourdomain.com (check spam folder)





















